####################################################
# GEANT4 VCGLIB/CAD INTERFACE
#
# File:      Makefile.in - Makefile template
#
# Author:    Christopher M Poole,
# Email:     mail@christopherpoole.net
#
# Date:      7th April, 2011
####################################################

$CC = g++

G4INCLUDE_EXEC := $(shell [ -r $(G4INCLUDE)/globals.hh ] && echo 1)

libcadmesh.so: src/CADMesh.o @vcglib_dir@@plylib_object@
	$(CC) -shared -o libcadmesh.so src/CADMesh.o @vcglib_dir@@plylib_object@ @tetgen_lib@

src/CADMesh.o: src/CADMesh.cc
	$(CC) -g -fPIC -Iinclude/ @include_flag@@vcglib_dir@ -I$(G4INCLUDE) -I$(CLHEP_INCLUDE_DIR) -c src/CADMesh.cc -o src/CADMesh.o @disable_vcglib@ @disable_tetgen@ @debug@

@vcglib_dir@/wrap/ply/plylib.o: @vcglib_dir@/wrap/ply/plylib.cpp
	$(CC) -g -fPIC -c @vcglib_dir@/wrap/ply/plylib.cpp -o @vcglib_dir@/wrap/ply/plylib.o

install:
	cp libcadmesh.so @prefix@/lib/libcadmesh.so
	cp include/CADMesh.hh @prefix@/include/CADMesh.hh

remove:
	rm @prefix@/lib/libcadmesh.so @prefix@/include/CADMesh.hh

clean:
	rm libcadmesh.so src/CADMesh.o @vcglib_dir@/wrap/ply/plylib.o
	
