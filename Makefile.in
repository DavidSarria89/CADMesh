####################################################
# GEANT4 VCGLIB/CAD INTERFACE
#
# File:      Makefile.in - Makefile template
#
# Author:    Christopher M Poole,
# Email:     mail@christopherpoole.net
#
# Date:      7th April, 2011
####################################################

G4INCLUDE_EXEC := $(shell [ -r $(G4INCLUDE)/globals.hh ] && echo 1)

libcadmesh.so: src/CADMesh.o @vcglib_dir@/wrap/ply/plylib.o
	g++ -shared -o libcadmesh.so src/CADMesh.o @vcglib_dir@/wrap/ply/plylib.o @tetgen_lib@ 

src/CADMesh.o: src/CADMesh.cc
	g++ -g -fPIC -Iinclude/ -I@vcglib_dir@ -I$(G4INCLUDE) -I$(CLHEP_INCLUDE_DIR) -c src/CADMesh.cc -o src/CADMesh.o @disable_tetgen@

@vcglib_dir@/wrap/ply/plylib.o: @vcglib_dir@/wrap/ply/plylib.cpp
	cd @vcglib_dir@/wrap/ply/; g++ -g -fPIC -c plylib.cpp

install:
	cp libcadmesh.so @prefix@/lib/libcadmesh.so
	cp include/CADMesh.hh @prefix@/include/CADMesh.hh

remove:
	rm @prefix@/lib/libcadmesh.so @prefix@/include/CADMesh.hh

clean:
	rm libcadmesh.so src/CADMesh.o @vcglib_dir@/wrap/ply/plylib.o
	
